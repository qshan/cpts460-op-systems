/*********************************************************************
*   type.h - get_proc, put_proc, enquque, dequeue, printList
*********************************************************************/
#include "type.h"
/*********************************************************************
*   globals.h - PROCs, queues, OFTs and PIPES allocated
*********************************************************************/
#include "globals.h"
/*********************************************************************
*   que.c - get_proc, put_proc, enquque, dequeue, printList
*********************************************************************/
#include "que.c"
/*********************************************************************
*   odds.c - init, scheduler, int80h, set_vector, atoi, geti
*********************************************************************/
#include "odds.c"
/*********************************************************************
*   vid.c - vid_init, putc
*********************************************************************/
#include "vid.c"
/*********************************************************************
*   timer.c timer_init, thandler, kitimer, draw_clock, clear_clock
*********************************************************************/
#include "timer.c"
/*********************************************************************
*   kernel.c - kfork, do_ functions for body, reschedule, body
*********************************************************************/
#include "kernel.c"
/*********************************************************************
*   wait.c - ksleep, kwakeup, kexit, kwait, ready
*********************************************************************/
#include "wait.c"
/*********************************************************************
*   forkexec.c - copysegment, kexec, fork
*********************************************************************/
#include "forkexec.c"
/*********************************************************************
*   pipe.c - kpipe,
*********************************************************************/
#include "pipe.c"
/*********************************************************************
*   pv.c -
*********************************************************************/
#include "pv.c"
/*********************************************************************
*   serial.c -
*********************************************************************/
#include "serial.c"
/*********************************************************************
*   int.c - entry point from int80, getpid, ps, chname, kfork, ktswitch
*       kkwait, kkexit, getc, putc, kexec, khop
*********************************************************************/
#include "int.c"


main()
{
      int i, pid, status;  char c, d;
      vid_init();

      set_vector(80, int80h);
      set_vector(12, s0inth);
      sinit();
      
      printf("Welcome to the 460 Multitasking System\n");

      printf("initializing ......\n");
        init();
      printf("initialization complete\n");


      kfork("/bin/u1");


      while(1){
        if (readyQueue)
           tswitch();
      }
      printf("all dead, happy ending\n");
}
